<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="../../media/img/logos/logo_mathlabint_light.webp">
  <title>MATHLABINT - Felarte, Fern√°ndez, Galo, Inojosa, Larra√±aga</title>
  <link href="../../css/style.css" rel="stylesheet" />
</head>

<body>
  <header>
    <nav>
      <div class="menu-toggle" id="mobile-menu">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>

      <div class="logo">
        <img src="../../media/img/logos/logo_mathlabint_mix.webp" alt="MathLabInt Logo">
      </div>

      <ul class="nav-list" id="nav-list">
        <li><a href="../..">Inicio</a></li>
        <li><a href="../teorico.html">Te√≥rico</a></li>
        <li><a href="../avances.html">Avances</a></li>
        <li><a href="../practico.html">Pr√°ctico</a></li>
        <li><a href="../epilogo.html">Ep√≠logo</a></li>
        <li>
          <select id="languageSelector" onchange="changeLanguage(this.value)">
            <option value="es">üá∫üáæ ES</option>
            <option value="en">üá∫üá∏ EN</option>
            <option value="pt">üáßüá∑ PT</option>
          </select>
        </li>
      </ul>
    </nav>
    <div id="google_translate_element" style="display: none;"></div>
  </header>

  <main>
    <section class="doc-tecnica-page">
      <h1>üìã Documentaci√≥n T√©cnica</h1>
      
      <div class="doc-intro">
        <p><strong>Fecha l√≠mite de entrega:</strong> 14 de noviembre de 2025</p>
        <p>
          Esta secci√≥n contiene la documentaci√≥n t√©cnica completa del proyecto MathLabInt, 
          desarrollado en la asignatura "Laboratorio STEAM+" de la Tecnicatura en Redes y Software 
          del Instituto Tecnol√≥gico de Inform√°tica (UTU).
        </p>
      </div>

      <!-- Acorde√≥n 1: Descripci√≥n -->
      <div class="doc-accordion">
        <div class="doc-accordion-header" onclick="toggleDocAccordion(this)">
          <h3>üìù Descripci√≥n del proyecto</h3>
          <span class="doc-accordion-icon">‚ñº</span>
        </div>
        <div class="doc-accordion-content">
          <p>
            Herramienta educativa que usa sensores de Micro:bit para capturar informaci√≥n del entorno 
            (temperatura, inclinaci√≥n, orientaci√≥n, sonido, luz) y transformarla en ejercicios matem√°ticos.
          </p>
          <p>
            Genera autom√°ticamente ejercicios personalizados mediante la integraci√≥n de Inteligencia Artificial, 
            basados en los datos recopilados y adaptados a diferentes niveles de dificultad.
          </p>
          <p>
            <strong>Destinatarios:</strong> Profesores y estudiantes de Matem√°ticas, F√≠sica y Qu√≠mica, principalmente.
          </p>
        </div>
      </div>

      <!-- Acorde√≥n 2: Materiales -->
      <div class="doc-accordion">
        <div class="doc-accordion-header" onclick="toggleDocAccordion(this)">
          <h3>üîß Materiales necesarios</h3>
          <span class="doc-accordion-icon">‚ñº</span>
        </div>
        <div class="doc-accordion-content">
          <div class="materiales-grid">
            <div class="material-item">
              <strong>2x Micro:bit</strong>
              <p>Placa profesor y placa estudiante para captura y comunicaci√≥n de datos</p>
              <img src="../../media/img/complementos/microbit_2.webp" alt="Micro:bit" class="material-img">
              <img src="../../media/img/complementos/microbit_2.webp" alt="Micro:bit" class="material-img">
            </div>
            <div class="material-item">
              <strong>1x M√≥dulo de bater√≠a</strong>
              <p>Para uso port√°til sin conexi√≥n USB</p>
              <img src="../../media/img/complementos/modulobateria.png" class="material-img">
            </div>
            <div class="material-item">
              <strong>1x Computadora/Laptop</strong>
              <p>Para programaci√≥n, sistema y generaci√≥n de ejercicios</p>
              <img src="../../media/img/complementos/laptop.png" class="material-img">
            </div>
            <div class="material-item opcional">
              <strong>1x Placa expansora</strong>
              <p>Facilita conexiones con sensores externos</p>
              <span class="badge-opcional">Opcional</span>
              <img src="../../media/img/complementos/placaexpansora.png" class="material-img">
            </div>
            <div class="material-item opcional">
              <strong>1x Rotary Encoder</strong>
              <p>Sensor adicional de rotaci√≥n para ejercicios avanzados</p>
              <span class="badge-opcional">Opcional</span>
              <img src="../../media/img/complementos/rotaryencoder.png" class="material-img">
            </div>
            <div class="material-item opcional">
              <strong>1x Protoboard + cableado</strong>
              <p>Para prototipos y conexiones personalizadas</p>
              <span class="badge-opcional">Opcional</span>
              <img src="../../media/img/complementos/protoboard.png" class="material-img">
            </div>
          </div>
        </div>
      </div>

      <!-- Acorde√≥n 3: Dise√±o Mec√°nico -->
      <div class="doc-accordion">
        <div class="doc-accordion-header" onclick="toggleDocAccordion(this)">
          <h3>‚öôÔ∏è Dise√±o mec√°nico</h3>
          <span class="doc-accordion-icon">‚ñº</span>
        </div>
        <div class="doc-accordion-content">
          <p>
            El sistema utiliza los botones integrados del Micro:bit para la interacci√≥n b√°sica:
          </p>
          <ul>
            <li><strong>Paso 1:</strong> Se utiliza el bot√≥n A del micro:bit para capturar el dato del sensor activo en ese momento</li>
            <li><strong>Paso 2:</strong> Se toma el dato, como se ve en los siguientes ejemplos:</li>
          </ul>
          <img src="../../media/img/avances/2025-09-19_19.38.00.jpg" class="material-img">
          <img src="../../media/img/avances/2025-08-29_20.00.21.jpg" class="material-img">
          <img src="../../media/img/avances/2025-08-29_20.02.45.jpg" class="material-img">
          <p>
            Una vez capturado el dato, el trabajo principal es realizado por el software, 
            generando el ejercicio matem√°tico mediante IA.
          </p>
        </div>
      </div>

      <!-- Acorde√≥n 4: Dise√±o Electr√≥nico -->
      <div class="doc-accordion">
        <div class="doc-accordion-header" onclick="toggleDocAccordion(this)">
          <h3>‚ö° Dise√±o electr√≥nico (opcional)</h3>
          <span class="doc-accordion-icon">‚ñº</span>
        </div>
        <div class="doc-accordion-content">
          <h4>Conexi√≥n del Rotary Encoder (opcional)</h4>
          <p>Diagrama de conexi√≥n realizado en TinkerCad:</p>
          
          <!-- Ac√° pondr√≠as la imagen del diagrama -->
          <div class="diagram-placeholder">
            <img src="../../media/img/complementos/captura-tinkercad.png">
          </div>
          
          <h4>Esquema de conexiones:</h4>
          <table class="conexiones-table">
            <thead>
              <tr>
                <th>Cable</th>
                <th>Origen (Micro:bit)</th>
                <th>Destino (Rotary Encoder)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><span class="cable-color" style="background: #8B00FF;"></span> Violeta</td>
                <td>Pin 1</td>
                <td>Se√±al A del encoder</td>
              </tr>
              <tr>
                <td><span class="cable-color" style="background: #00AA00;"></span> Verde</td>
                <td>Pin 0</td>
                <td>Se√±al B del encoder</td>
              </tr>
              <tr>
                <td><span class="cable-color" style="background: #FF0000;"></span> Rojo</td>
                <td>3V</td>
                <td>Alimentaci√≥n (+)</td>
              </tr>
              <tr>
                <td><span class="cable-color" style="background: #000;"></span> Negro</td>
                <td>GND</td>
                <td>Tierra (-)</td>
              </tr>
            </tbody>
          </table>
          
          <p class="nota-importante">
            <strong>Nota:</strong> La resistencia pull-up est√° incluida internamente en el m√≥dulo del encoder.
          </p>
          
          <a href="https://www.tinkercad.com/things/jtDg1BCaaEv/editel?returnTo=%2Fdashboard%2Fdesigns%2Fcircuits&sharecode=yZNme-_Om47oWXn3RrlI7KQBRUb2BOSMKvXH-jhwtQc"
            target="_blank" class="doc-external-link">
            üîó Ver dise√±o completo en TinkerCad
          </a>
        </div>
      </div>

      <!-- Acorde√≥n 5: Dise√±o Software -->
      <div class="doc-accordion">
        <div class="doc-accordion-header" onclick="toggleDocAccordion(this)">
          <h3>üíª Dise√±o de software</h3>
          <span class="doc-accordion-icon">‚ñº</span>
        </div>
        <div class="doc-accordion-content">
          <p>
            El proyecto integra m√∫ltiples componentes de software para su funcionamiento completo:
          </p>

          <h4>üîÑ Flujo del sistema:</h4>
          <ol class="flujo-lista">
            <li>El profesor configura tipo de sensor, dificultad y contexto del ejercicio</li>
            <li>El sistema env√≠a configuraci√≥n a Micro:bit alumno v√≠a radiofrecuencia</li>
            <li>Micro:bit alumno captura datos del sensor (ej: temperatura, luz, sonido)</li>
            <li>Los datos se env√≠an de vuelta a Micro:bit profesor por RF</li>
            <li>Micro:bit profesor transmite datos al sistema por USB</li>
            <li>El sistema genera ejercicio matem√°tico usando IA con los datos reales</li>
          </ol>

          <h4>üì¶ Repositorios del proyecto:</h4>
          <div class="repos-grid">

              <span class="repo-icon">üåê</span>
              <strong>Sitio web documental</strong>
              <p>Landing page y documentaci√≥n</p>
              <a href="https://github.com/PROYECTO-TD-2/web" target="_blank"  rel="noopener noreferrer" class="codigo-button docs">
                Ver en GitHub
              </a>
           
              <span class="repo-icon">üîå</span>
              <strong>Conexi√≥n Micro:bit</strong>
              <p>Comunicaci√≥n serial</p>
              <a href="https://github.com/PROYECTO-TD-2/microbit-connection" target="_blank" rel="noopener noreferrer" class="codigo-button docs">
                Ver en GitHub
            </a>

              <span class="repo-icon">üë®‚Äçüè´</span>
              <strong>Cliente web profesor</strong>
              <p>Interfaz de configuraci√≥n</p>
              <a href="https://github.com/PROYECTO-TD-2/web-cliente-prof" target="_blank" rel="noopener noreferrer" class="codigo-button docs">
                Ver en GitHub
              </a>

              <span class="repo-icon">üñ•Ô∏è</span>
              <strong>Servidor Micro:bit</strong>
              <p>Backend y API de IA</p>
              <a href="https://github.com/PROYECTO-TD-2/microbit-server" target="_blank" rel="noopener noreferrer" class="codigo-button docs">
                Ver en GitHub
              </a>

          </div>

          <h4>üõ†Ô∏è C√≥digos utilizados:</h4>
          <ul>
            <li><strong>Funci√≥n:</strong> Realiza el llamado a la API de LLM.</li>
<!-- Ejemplo de bloque de c√≥digo -->
<div class="code-block">
  <div class="code-header">
    <span class="code-language">JavaScript</span>
    <button class="code-copy-btn" onclick="copyCode(this)">
      <span class="copy-icon">üìã</span>
      <span class="copy-text">Copiar</span>
    </button>
  </div>
  <pre><code class="language-javascript">
    import { showToast } from "./ui.js";
    const API_URL = "<url api>/generate";
    
    export async function fetchExercises(payload) {
        try {
            const response = await fetch(API_URL, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload),
            });
    
            if (!response.ok) {
              showToast("Error llamando a la API", "danger");
              throw new Error(`Error en API: ${response.statusText}`);
            }
    
            return await response.json();
        } catch (err) { 
            showToast("Error llamando a la API", "danger");
            console.error("Error llamando a la API:", err);
            return null;
        }
    }
  </code></pre>
</div>

            <li><strong>Funci√≥n:</strong> Vinculaci√≥n de la placa micro:bit docente con el sistema.</li>
            <div class="code-block">
              <div class="code-header">
                <span class="code-language">JavaScript</span>
                <button class="code-copy-btn" onclick="copyCode(this)">
                  <span class="copy-icon">üìã</span>
                  <span class="copy-text">Copiar</span>
                </button>
              </div>
              <pre><code class="language-javascript">
export async function connectMicrobit() {
                  if (writer) {
                     showToast("Micro:bit ya est√° conectado", "info");
                      return;
                  }
                  try {
                      showSpinner("Conectando con micro:bit...");
                      port = await navigator.serial.requestPort();
                      await port.open({ baudRate: 115200 });
                      writer = port.writable.getWriter();
                      reader = port.readable.getReader();
              
                      readLoop();
                      hideSpinner();
                       showToast("Micro:bit conectado", "success");
                  } catch (err) {
                      hideSpinner();
                      showToast("Error al conectar: " + err, "danger");
                  }
              }
              </code></pre>
            </div>
            <li><strong>Funci√≥n:</strong> Configuraci√≥n micro:bit docente.</li>
            <div class="code-block">
              <div class="code-header">
                <span class="code-language">JavaScript</span>
                <button class="code-copy-btn" onclick="copyCode(this)">
                  <span class="copy-icon">üìã</span>
                  <span class="copy-text">Copiar</span>
                </button>
              </div>
              <pre><code class="language-javascript">
                from microbit import *
                import radio
                
                # Encender radio y configurar grupo
                radio.on()
                radio.config(group=1,power=7)
                
                # Inicializar UART
                uart.init(baudrate=115200)
                
                while True:
                    # --- UART ‚Üí RADIO --- UART (Universal Asynchronous Receiver/Transmitter)
                    if uart.any():
                        serial_data = uart.readline()
                        if serial_data:
                            message = serial_data.decode('utf-8').strip()
                            
                            # Enviar al alumno por radio
                            radio.send(message)
                            
                            # Feedback visual
                            display.show(Image.CHESSBOARD)
                            sleep(300)
                            display.clear()
                    # --- RADIO ‚Üí UART ---
                    msg = radio.receive()
                    if msg:
                        # Mostrar feedback visual
                        display.show(Image.YES)
                        sleep(300)
                        display.clear()
                
                        # Reenviar al navegador
                        uart.write(msg + "\n")
                    
                    sleep(100)
              </code></pre></div>
            <li><strong>Funci√≥n:</strong> Ejemplo de micro:bit estudiante.</li>
            <div class="code-block">
              <div class="code-header">
                <span class="code-language">JavaScript</span>
                <button class="code-copy-btn" onclick="copyCode(this)">
                  <span class="copy-icon">üìã</span>
                  <span class="copy-text">Copiar</span>
                </button>
              </div>
              <pre><code class="language-javascript">
                from microbit import display, Image
                from sensor_strategy import SensorStrategy
                
                class SensorLuz(SensorStrategy):
                    def read(self):
                        # truco: contar LEDs encendidos como proxy de luz
                        # (micro:bit no tiene sensor de luz directo, se simula con la pantalla)
                        level = display.read_light_level()
                        pendiente = 13.4181
                        intercepto = -668.1764 
                        resultado = (level * pendiente) + intercepto
                        if resultado < 0:
                            resultado = 0
                        return resultado
              </code></pre>
          </ul>
        </div>
      </div>

    </section>
  </main>

  <div class="contenedor-flecha">
    <a href="../practico.html" class="arrow-link">‚¨ÖÔ∏è‚Äã</a> 
    <a href="../.." class="arrow-link">üè†‚Äã</a>
  </div>

  <script src="../../js/traductor.js"></script>
  <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  <script type="text/javascript" src="../../js/documentacion-tecnica.js"></script>
  <script defer type="text/javascript" src="../../js/script.js"></script>
</body>

</html>